!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._posthogChunkIds=e._posthogChunkIds||{},e._posthogChunkIds[n]="0198824c-9dbc-7661-9f75-9ccf67fc2efc")}catch(e){}}();import{L as W}from"./CBomguU0MRsX.js";typeof module<"u"&&(module=void 0);typeof exports<"u"&&(exports=void 0);function P(){$.fn.seedFindControls=function(p){var f=this,m=4,v=2,s={buttonGo:f.find("#seed-find-go"),buttonPause:f.find("#seed-find-pause"),buttonResume:f.find("#seed-find-resume"),buttonStop:f.find("#seed-find-stop"),buttonReset:f.find("#seed-find-reset"),buttonEdit:f.find("#seed-find-edit"),seedsSlider:f.find("#sf-seeds-slider"),seedsCount:f.find("#sf-seeds-count"),workerSlider:f.find("#sf-workers-slider"),workerCount:f.find("#sf-workers-count"),etaLabel:f.find("#sf-eta-count"),expectedSeedsCount:f.find("#sf-expectedseeds-count"),timeElapsedCount:f.find("#sf-timerun-count"),resultsList:f.find("#sf-results-list"),resultsPlaceHolder:f.find("#sf-results-placeholder")},k={slimeFinderToolTip:"Open with Slime Finder"},r={formatScientific:function(e){var n=Math.floor(Math.log(e)/Math.log(10)),d=Math.round(e/Math.pow(10,n));return d+" E"+n},metricPrefixNumber:function(e){for(var n=["","k","M","G","T","P","E","Z","Y"],d=e,a=0;a<n.length;a++){if(e<1e3)return Math.floor(e)+n[a];e/=1e3}return r.formatScientific(d)},formatTime:function(e){var n=e%60,d=Math.floor(e%3600/60),a=Math.floor(e/3600);return a<1?a="":a=r.metricPrefixNumber(a)+"h ",d<1?d="":d=d+"min ",n<10&&(n="0"+n),n=n+"s",a+d+n},formatTimeRough:function(e){var n=e%60,d=Math.floor(e%3600/60),a=Math.floor(e/3600);return a>0?r.metricPrefixNumber(Math.ceil(a))+"h":d>0?d+"min":n+"s"}},t={getWorkerCount:function(){var e=parseInt(s.workerCount.text());return Math.min(100,Math.max(1,Math.floor(e)))},getSeedsCount:function(){var e=parseInt(s.seedsCount.text());return Math.min(10,Math.max(1,Math.floor(e)))},setExpectedSeeds:function(e){s.expectedSeedsCount.text(r.metricPrefixNumber(e))},setTimeElapsed:function(e){s.timeElapsedCount.text(r.formatTime(e))},setEta:function(e){var n;isNaN(e)?n="?":n=r.formatTimeRough(e),s.etaLabel.text(n)},addResult:function(e){s.resultsPlaceHolder.addClass("hidden"),s.resultsList.append(t.createResultItem(e))},createResultItem:function(e){var n=$('<li><a class="forceColor sf-result-link"">'+e+'</a><a title="'+k.slimeFinderToolTip+'" href="/apps/slime-finder#'+e+'" target="_blank"><i class="icon-external-link"></i></a></li>');return n.find("a.sf-result-link").on("click",function(){i.displaySeed(e)}),n},clearResults:function(){s.resultsList.html(""),s.resultsPlaceHolder.removeClass("hidden")},disableControls:function(){s.seedsSlider.slider({disabled:!0}),s.workerSlider.slider({disabled:!0})},enableControls:function(){s.seedsSlider.slider({disabled:!1}),s.workerSlider.slider({disabled:!1})},showStartButton:function(){s.buttonGo.show(),s.buttonResume.hide(),s.buttonPause.hide()},showResumeButton:function(){s.buttonGo.hide(),s.buttonResume.show(),s.buttonPause.hide()},showPauseButton:function(){s.buttonGo.hide(),s.buttonResume.hide(),s.buttonPause.show()},enableStopButton:function(){s.buttonStop.removeAttr("disabled")},disableStopButton:function(){s.buttonStop.attr("disabled","disabled")},setEditButtonActive:function(){s.buttonEdit.addClass("active")},setEditButtonInactive:function(){s.buttonEdit.removeClass("active")}},c=function(){var e={},n=1e3,d,a=!1;function S(){o.updateStatus()}return e.start=function(){a||(a=!0,d=setInterval(S,n))},e.stop=function(){a&&(a=!1,clearInterval(d))},e}(),o={goButtonPressed:function(){var e=t.getWorkerCount(),n=t.getSeedsCount();i.startWorkers(e,n)},resetButtonPressed:function(){t.clearResults(),SeedFinderApp.resetChunkMap(),o.stopWorkers(),t.setTimeElapsed(0),i.displayEdit()},editButtonPressed:function(){i.displayEdit()},seedsSliderMoved:function(e,n){s.seedsCount.text(n.value),t.setEta(i.getEstimate(parseInt(t.getSeedsCount())))},workerSliderMoved:function(e,n){s.workerCount.text(n.value)},pauseWorkers:function(){i.pauseWorkers()},resumeWorkers:function(){var e=t.getWorkerCount(),n=t.getSeedsCount();i.resumeWorkers(e,n)},stopWorkers:function(){i.stopWorkers()},updateStatus:function(){t.setTimeElapsed(i.getTimeRun()),t.setEta(i.getEstimate(parseInt(t.getSeedsCount())))}},u={mapChanged:function(e,n){t.setExpectedSeeds(n),t.setEta(i.getEstimate(parseInt(t.getSeedsCount()))),t.setTimeElapsed(0)},workersStarted:function(){t.disableControls(),t.clearResults(),t.setTimeElapsed(0),c.start(),t.showPauseButton(),t.enableStopButton()},workersPaused:function(){t.enableControls(),c.stop(),t.showResumeButton()},workersResumed:function(){t.disableControls(),c.start(),t.showPauseButton()},workersStopped:function(){t.enableControls(),c.stop(),t.showStartButton(),t.disableStopButton()},seedFound:function(e,n){t.addResult(n.toString())},editingModeEnabled:function(){t.setEditButtonActive()},displaySeedModeEnabled:function(){t.setEditButtonInactive()}};s.seedsSlider.slider({min:1,max:4,step:1,value:m}),s.workerSlider.slider({min:1,max:10,step:1,value:v}),s.seedsCount.text(m),s.workerCount.text(v),s.buttonGo.click(o.goButtonPressed),s.buttonPause.click(o.pauseWorkers),s.buttonResume.click(o.resumeWorkers),s.buttonStop.click(o.stopWorkers),s.buttonReset.click(o.resetButtonPressed),s.buttonEdit.click(o.editButtonPressed),s.seedsSlider.on("slide",o.seedsSliderMoved),s.workerSlider.on("slide",o.workerSliderMoved),i.on("sf-mapChanged",u.mapChanged),i.on("sf-workersStarted",u.workersStarted),i.on("sf-workersPaused",u.workersPaused),i.on("sf-workersResumed",u.workersResumed),i.on("sf-workersStopped",u.workersStopped),i.on("sf-seedFound",u.seedFound),i.on("sf-editingMap",u.editingModeEnabled),i.on("sf-showingSeed",u.displaySeedModeEnabled),t.showStartButton()};var i=function(){var p=$({}),f,m=function(){var r={},t=!1,c=!1,o=[],u=[],e,n,d,a,S,b;function M(l){!t||!c||(o.push(l),k.foundSeed(l),h())}function h(){if(o.length>=e){var l=o;return r.stopWorkers(),k.workersFinished(l),!0}return!1}function g(l){a=+new Date;for(var w=0;w<l;w++){var C=new Worker(new URL("/_astro/CEf5kR8BNkPl.js",import.meta.url),{type:"module"});C.addEventListener("message",function(T){var R=T.data;R.startsWith("T")?b+=1e4:R.startsWith("H")&&M(W.fromString(R.substr(1)))},!1),C.postMessage(d),u.push(C)}}function E(){for(var l=0;l<u.length;l++)u[l].terminate();S+=+new Date-a,u=[]}return r.startWorkers=function(l,w){return t?!1:(t=!0,c=!0,S=0,b=0,n=l,e=w,d=JSON.stringify(SeedFinderApp.getActiveChunkMap()),g(n),k.workersStarted(),!0)},r.pauseWorkers=function(){!t||!c||(c=!1,E(),k.workersPaused())},r.resumeWorkers=function(l,w){!t||c||(c=!0,e=w,n=l,h()||(g(n),k.workersResumed()))},r.stopWorkers=function(){t&&(t=!1,c=!1,o=[],S=0,E(),k.workersStopped())},r.getTimeRunMs=function(){var l=S;return c&&(l+=+new Date-a),l},r.getTimeRun=function(){return Math.round(r.getTimeRunMs()/1e3)},r.getSeedsChecked=function(){return b},r.getFoundSeeds=function(){return o},r.getSeedsWanted=function(){return e},r}(),v=function(){var r={},t,c=3e3,o,u,e,n=0,d,a;function S(){var h=m.getSeedsChecked(),g=m.getTimeRunMs(),E=f,l=g-d,w=h-a;e=Math.floor(1e3*h/g);var C=Math.floor(1e3*w/l);u<=0?u=C:u=.7*C+.3*u,o=E/u,d=g,a=h}function b(){t=setInterval(S,c)}function M(){clearInterval(t)}return r.startLiveMonitor=function(){b()},r.pauseLiveMonitor=function(){M()},r.resumeLiveMonitor=function(){b()},r.stopLiveMonitor=function(){M()},r.getEstimate=function(h){if(o>0)return Math.round(h*o);if(n>0){var g=f;return Math.round(h*g/n)}},r.resetLiveData=function(){e>0&&u>0&&(n=Math.floor(e*.5+u*.5)),d=0,a=0,u=0,e=0,o=0},r}();function s(r){var t=0,c=0;for(var o in r)if(typeof r[o]=="object"){for(var u in r[o])if(typeof r[o][u]=="number"){var e=r[o][u];e===1?t++:e===2&&c++}}return Math.floor(Math.pow(10,t)*Math.pow(10/9,c))}var k={workersStarted:function(){i.triggerHandler("sf-workersStarted"),v.resetLiveData(),v.startLiveMonitor(),SeedFinderApp.lockMap()},workersPaused:function(){i.triggerHandler("sf-workersPaused"),v.pauseLiveMonitor()},workersResumed:function(){i.triggerHandler("sf-workersResumed"),v.resetLiveData(),v.resumeLiveMonitor()},workersStopped:function(){i.triggerHandler("sf-workersStopped"),v.stopLiveMonitor(),SeedFinderApp.unlockMap()},workersFinished:function(r){v.stopLiveMonitor(),SeedFinderApp.unlockMap()},chunksChanged:function(r,t){f=s(t),v.resetLiveData(),m.stopWorkers(),p.triggerHandler("sf-mapChanged",f)},foundSeed:function(r){i.triggerHandler("sf-seedFound",r)}};return p.startWorkers=function(r,t){m.startWorkers(r,t)},p.pauseWorkers=function(){m.pauseWorkers()},p.resumeWorkers=function(r,t){m.resumeWorkers(r,t)},p.stopWorkers=function(){m.stopWorkers()},p.getTimeRun=function(){return m.getTimeRun()},p.getEstimate=function(r){return v.getEstimate(r)},p.displaySeed=function(r){SeedFinderApp.triggerHandler("seedchange",[W.fromString(r),void 0]),SeedFinderApp.delegateToApp(),p.triggerHandler("sf-showingSeed")},p.displayEdit=function(){SeedFinderApp.editMode(),p.triggerHandler("sf-editingMap")},p.on("sf-chunksChanged",k.chunksChanged),p}();globalThis.SeedFinder=i}P.call(typeof window<"u"?window:globalThis);
//# sourceMappingURL=DCkO7qDawGwm.js.map

//# chunkId=0198824c-9dbc-7661-9f75-9ccf67fc2efc