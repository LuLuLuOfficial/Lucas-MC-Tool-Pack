!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._posthogChunkIds=e._posthogChunkIds||{},e._posthogChunkIds[n]="01988f4c-011d-7223-b6ef-aed217145cce")}catch(e){}}();var ie=(S,r)=>()=>(r||S((r={exports:{}}).exports,r),r.exports);import{t as te}from"./DZJpEsl-8Xn-.js";var oe=ie((O,B)=>{typeof B<"u"&&(B=void 0);typeof O<"u"&&(O=void 0);function le(){var S=function(r,s){var F="CHUNK_ASYNC_TILE_LOAD_ERROR",L=0,K=5,X=s.loadTile,Z=s.nrParallel,p=function(){var o=new QuickLRU({maxSize:2048}),i=[],v={},d={},l=Object.assign({seed:"0",platform:s.defaultPlatform,tileSize:8,tileScale:1,biomeFilter:null,dimension:r.initialDimension,pois:[],showBiomes:!1,biomeHeight:r.initialBiomeHeight,showHeights:!1},appHelpers.poisToParams(r.initialPois)),b=null;if(s.getHoverText){var C=function(e){return l.tileScale>=1?e:Math.floor(e/l.tileScale)*l.tileScale};r.getHoverText=memoizeQuickLRU(function(e){var n=C(e.chunkX),t=C(e.chunkZ),u=k(G(n,t)),a=o.get(u);if(a)return s.getHoverText(n,t,a,l)},{maxSize:100,hash:function(e){return C(e.chunkX)+" "+C(e.chunkZ)}})}r.onCanvasClick=function(e,n){return s.onCanvasClick?s.onCanvasClick(e,n,l):{hit:!1}},r.testCanvasHit=function(e,n){return s.testCanvasHit?s.testCanvasHit(e,n):!1},r.isClickable=s.isClickable;function Y(e,n){o.clear(),s.onParamsChanged(e,n),r.getHoverText&&r.getHoverText.clear(),M=[],i=[],v={},d={}}function G(e,n){var t=l.tileSize,u=l.tileScale;return{x:Math.floor(e/t)*t,z:Math.floor(n/t)*t,xL:t,zL:t,scale:u}}function J(e,n,t,u){for(var a=l.tileSize,h=l.tileScale,g=Math.floor(e/a),c=Math.floor(n/a),H=Math.floor((e+t+1)/a),T=Math.floor((n+u+1)/a),w=[],x=c;x<=T;x++)for(var z=g;z<=H;z++)w.push({x:z*a,z:x*a,xL:a,zL:a,scale:h});return w}var M=[],E=0;function R(){for(;E<Z&&M.length>0;){var e=M.shift();V(e)}}function V(e){if(!e.beforeLoad()){R();return}E+=1,X(e.params,e.tile,function(n){E-=1,setTimeout(R,0),e.cb(n)})}R();function D(e,n,t){M.push({params:l,tile:e,beforeLoad:n,cb:t}),E<1&&R()}function W(e,n,t,u){var a=k(e);if(o.has(a)){u(null,o.get(a));return}if(v[a]){v[a]=u,d[a]=t;return}v[a]=u,d[a]=t,D(e,function(){return d[a]?d[a]()?(delete d[a],delete v[a],!1):!0:!1},function(h){if(!n()){var g=null;v[a]&&(g=v[a],delete v[a],delete d[a]);var c=h&&{tile:e,hits:h.error?h:s.processTile(h,e)};if(o.set(a,c),c.hits.error&&(i.push(a),L<K)){L+=1;var H=L===1&&c.hits.errorStack&&Math.random()<.01,T=c.hits.errorStr+" ("+L+") ("+(navigator.hardwareConcurrency||0)+")";H&&(T+=" ("+c.hits.errorStack+")"),te("CB_ChunkApp_ChunkLoadError",{errorMsg:T})}g&&g(c)}})}function k(e){return e.x+"-"+e.z}function N(e,n,t,u,a){var h=J(e,n,t,u),g=[],c=[];return h.forEach(function(H){var T=k(H);o.has(T)?c.push(o.get(T)):g.push(H)}),[c,g]}var j=$('<span>Failed to load region. <button style="text-decoration: underline" class="retry-now unstyled-button">Try again</button></span>');return j.find(".retry-now").click(function(){i.forEach(function(e){o.delete(e)}),i=[],r.getHoverText&&r.getHoverText.clear(),r.triggerHandler("hideerror",[F]),r.triggerHandler("redrawmap",[])}),{getParams:function(){return l},setParams:function(e){var n=Object.keys(e).filter(function(t){return l[t]!==e[t]});n.length<1||(l=Object.assign({},l,e),Y(l,n))},getRenderer:function(e,n,t,u,a,h){var g=!1,c=!1;b&&b.onCancel();var H=l,T=function(){return H!==l},w={hasNext:function(){return!g},renderNextAsync:function(x,z,Q,y,ee,re,ae){var _=function(f,m){var P=h(f.tile.x,f.tile.z);if(f.hits.error){if(!z(P[0],P[1],f.tile.xL*a,f.tile.zL*a,!0,!0))return;r.triggerHandler("showerror",[F,j,!1,"error",!0])}else{if(!z(P[0],P[1],f.tile.xL*a,f.tile.zL*a,!0,!1))return;s.paintTile(x,m,f.tile,f.hits,y,a,h,ae,l)}},U=function(f){s.beforeMapRepaint(),f.forEach(function(m){_(m,"biomes")}),ee(),f.forEach(function(m){_(m,"slimeChunks")}),f.forEach(function(m){_(m,"pois")}),s.onMapRepainted(l)};if(g)throw new Error;g=!0;var q=N(e,n,t,u),ne=q[0],I=q[1];U(ne);var A=0;I.length<1&&Q(),I.forEach(function(f){A+=1,W(f,T,function(){return T()||c},function(m){if(A-=1,m&&!c){re();var P=N(e,n,t,u)[0];U(P)}A<1&&Q()})})},onCancel:function(){c=!0}};return b=w,w}}}();return r.getRenderer=p.getRenderer,r.on("seedchange",function(o,i,v,d){p.setParams({seed:i.toString()}),r.trigger("seedapply",[i,v,d])}),r.on("platformchange",function(o,i){p.setParams({platform:i})}),r.on("biomefilterchanged",function(o,i){p.setParams({biomeFilter:i}),r.triggerHandler("redrawmap")}),r.on("applydimensionchanged",function(o,i){p.setParams({dimension:i}),r.triggerHandler("redrawmap")}),r.on("poischanged",function(o,i){var v=appHelpers.poisToParams(i.pois);p.setParams(v),r.triggerHandler("redrawmap")}),r.on("biomeheightchanged",function(o,i){p.setParams({biomeHeight:i}),r.triggerHandler("redrawmap")}),r.on("showheightschanged",function(o,i){p.setParams({showHeights:i}),r.triggerHandler("redrawmap")}),r.on("mapDrawingStarted",function(o,i,v){var d=S.calcTileParams(i.chunkWidth),l=d.size,b=d.scale;p.setParams({tileSize:l,tileScale:b})}),r.on("mapdimensionschanged",function(o,i){s.onMapDimensionsChanged(i[0],i[1])}),r.on("canvasinit",function(o,i){s.init(i,p.getParams())}),r};S.calcTileParams=function(r){return r<.25?{size:512,scale:8}:r<.5?{size:256,scale:4}:r<1?{size:128,scale:2}:r<2?{size:64,scale:1}:r<4?{size:32,scale:.5}:r<8?{size:16,scale:.25}:{size:8,scale:.25}},globalThis.SeedMapTiles=S}le.call(typeof window<"u"?window:globalThis)});export default oe();
//# sourceMappingURL=Bxr3bmFIwOLH.js.map

//# chunkId=01988f4c-011d-7223-b6ef-aed217145cce